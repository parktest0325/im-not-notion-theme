{{- $pages := slice -}}
{{- with .Site.GetPage "/blog" }}{{ $pages = .RegularPagesRecursive }}{{ end -}}
{{- with .Site.GetPage "/projects" }}{{ $pages = append .RegularPagesRecursive $pages }}{{ end -}}
{{- $index := slice -}}
{{- range $pages -}}
  {{- if or .Params.showMenu .Params.showList -}}
  {{- $entry := dict
    "title" .Title
    "permalink" .RelPermalink
    "section" .Section
    "description" (.Description | default "")
    "content" .Plain
    "date" (.Date.Format "2006-01-02")
    "tags" (.Params.tags | default slice)
  -}}
  {{- $index = $index | append $entry -}}
  {{- end -}}
{{- end -}}
{{- $index | jsonify -}}
